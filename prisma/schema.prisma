generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           Int @id @default(autoincrement())
  name         String
  email        String   @unique
  password     String
  user_wallet  String?
  user_type    Int      @default(0) // 0 = admin, 1 = student
  image        String?
  createdAt    DateTime @default(now())

  certificates Certificate[] @relation("IssuedCertificates")
}

model Certificate {
  id                 Int @id @default(autoincrement())
  destination_wallet String
  nftAddress         String   @unique
  ipfsUrl            String
  mintedAt           DateTime @default(now())
  issuedById         Int
  issuedBy           User     @relation("IssuedCertificates", fields: [issuedById], references: [id])
}